
<html lang="en">
  <head>
    <meta charset="UTF-8"></meta>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"></meta>
    <title>Ultimate Toolkit</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet"></link>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <style>
      /* Your CSS is perfect and unchanged */
      :root { --color-bg-main: #f0f2f5; --color-bg-card: #ffffff; --color-primary-accent: #007BFF; --color-text-primary: #212529; --color-text-secondary: #6c757d; --color-border: #dee2e6; --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; --border-radius: 16px; --shadow-sm: 0 2px 4px rgba(0,0,0,0.05); --shadow-md: 0 5px 15px rgba(0,0,0,0.1); }
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: var(--font-family); background-color: var(--color-bg-main); color: var(--color-text-primary); line-height: 1.6; }
      .main-content { padding: 1.5rem; }
      .tools-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 1rem; }
      .tool-card { background-color: var(--color-bg-card); border-radius: var(--border-radius); padding: 1rem; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: transform 0.2s ease, box-shadow 0.2s ease; box-shadow: var(--shadow-sm); cursor: pointer; text-align: center; aspect-ratio: 1 / 1; }
      .tool-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); }
      .tool-card .card-icon { font-size: 2.25rem; color: var(--color-primary-accent); margin-bottom: 0.75rem; }
      .tool-card h2 { font-size: 0.9rem; font-weight: 600; color: var(--color-text-primary); }
      .btn { display: inline-block; background-color: var(--color-primary-accent); color: #fff; border: none; border-radius: 8px; padding: 10px 20px; font-weight: 600; cursor: pointer; text-align: center; transition: background-color 0.2s ease; }
      .btn:hover { background-color: #0056b3; }
      .btn-secondary { background-color: var(--color-text-secondary); }
      .btn-secondary:hover { background-color: #5a6268; }
      .tool-input, .tool-select, .tool-textarea { width: 100%; padding: 10px; background-color: #fff; border: 1px solid var(--color-border); border-radius: 8px; color: var(--color-text-primary); font-size: 1rem; margin-bottom: 1rem; }
      .tool-input:focus, .tool-select:focus, .tool-textarea:focus { outline: none; border-color: var(--color-primary-accent); box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25); }
      .tool-textarea { min-height: 120px; resize: vertical; }
      .modal-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.4); backdrop-filter: blur(4px); display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease; }
      .modal-container.show { opacity: 1; visibility: visible; }
      .modal-content { background-color: var(--color-bg-main); padding: 1.5rem; border-radius: var(--border-radius); box-shadow: var(--shadow-md); width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative; transform: translateY(20px); transition: transform 0.3s ease; }
      .modal-container.show .modal-content { transform: translateY(0); }
      .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--color-border); }
      .modal-header h2 { font-size: 1.5rem; color: var(--color-text-primary); }
      .modal-description { font-size: 1rem; color: var(--color-text-secondary); margin-bottom: 1.5rem; }
      .modal-close-btn { background: none; border: none; font-size: 1.75rem; cursor: pointer; color: var(--color-text-secondary); }
      .modal-close-btn:hover { color: var(--color-text-primary); }
      .notification { position: fixed; bottom: -100px; left: 50%; transform: translateX(-50%); background-color: #333; color: white; padding: 12px 24px; border-radius: 8px; box-shadow: var(--shadow-md); z-index: 3000; transition: bottom 0.5s ease, opacity 0.5s ease; }
      .playground-container { display: flex; height: 400px; gap: 1rem; flex-direction: column; }
      .playground-editor { flex: 1; display: flex; flex-direction: column; }
      .playground-editor textarea { flex: 1; resize: none; }
      #preview-pane { flex: 1; border: 1px solid var(--color-border); background-color: #fff; }
      .dice-coin-container { display: flex; gap: 1rem; justify-content: center; align-items: center; margin-bottom: 1rem; }
      .dice, .coin { font-size: 4rem; width: 80px; height: 80px; display: flex; justify-content: center; align-items: center; border: 2px solid var(--color-border); border-radius: var(--border-radius); }
      @media (max-width: 600px) { .tools-grid { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); } .playground-container { height: 300px; } }
    </style>
  </head>
  <body>
    <main class="main-content">
      <section id="tools">
        <div class="tools-grid"></div>
      </section>
    </main>
    <div class="modal-container" id="modal-container">
      <div class="modal-content" id="modal-content"></div>
    </div>
    <div class="notification" id="notification"></div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
          const toolsGrid = document.querySelector('.tools-grid');
          const modalContainer = document.getElementById('modal-container');
          const modalContent = document.getElementById('modal-content');
          const notificationEl = document.getElementById('notification');

          function downloadFile(data, fileName, fileType) { if (typeof Android !== 'undefined' && Android.saveBase64File) { const reader = new FileReader(); reader.onload = function() { const base64Data = reader.result.split(',')[1]; Android.saveBase64File(base64Data, fileName, fileType); }; reader.onerror = function() { showNotification('Error: Could not read the file for download.', 3000); }; reader.readAsDataURL(new Blob([data], { type: fileType })); } else { showNotification("Download function is only available in the Android app.", 4000); } }

          const tools = [ { id: "text-to-speech", title: "Text to Speech", desc: "Convert written text into speech using your device's voices.", icon: "fa-volume-up" }, { id: "speech-to-text", title: "Speech to Text", desc: "Transcribe your spoken words into text using your microphone.", icon: "fa-microphone-alt" }, { id: "qr-code-generator", title: "QR Code Generator", desc: "Create and download QR codes for URLs, text, and more.", icon: "fa-qrcode" }, { id: "password-generator", title: "Password Generator", desc: "Generate strong, secure, and customizable passwords.", icon: "fa-key" }, { id: "tip-calculator", title: "Tip Calculator", desc: "Split bills and calculate the tip amount per person.", icon: "fa-receipt" }, { id: "random-number", title: "Random Number", desc: "Generate random numbers within a specified range.", icon: "fa-random" }, { id: "dice-coin", title: "Dice & Coin", desc: "Simulate dice rolls and coin flips for random outcomes.", icon: "fa-dice-d6" }, { id: "word-counter", title: "Word Counter", desc: "Count words, characters, and sentences in your text.", icon: "fa-file-word" }, { id: "case-converter", title: "Case Converter", desc: "Convert text to UPPERCASE, lowercase, Title Case, etc.", icon: "fa-text-height" }, { id: "lorem-ipsum", title: "Lorem Ipsum", desc: "Generate placeholder text for your designs and mockups.", icon: "fa-paragraph" }, { id: "url-encoder", title: "URL Encoder", desc: "Encode or decode special characters in URLs.", icon: "fa-link" }, { id: "hash-generator", title: "Hash Generator", desc: "Create MD5, SHA-1, and SHA-256 hashes from text.", icon: "fa-fingerprint" }, { id: "markdown-html", title: "Markdown Preview", desc: "Write in Markdown and see a live HTML preview.", icon: "fa-markdown" }, { id: "html-playground", title: "HTML Playground", desc: "Write HTML and CSS and see a live preview of your code.", icon: "fa-code" }, { id: "json-formatter", title: "JSON Formatter", desc: "Validate, format, and beautify your JSON data.", icon: "fa-sitemap" }, { id: "unit-converter", title: "Unit Converter", desc: "Convert various units of length, weight, and temperature.", icon: "fa-ruler-combined" }, { id: "age-calculator", title: "Age Calculator", desc: "Calculate exact age from a date of birth.", icon: "fa-calendar-alt" }, { id: "bmi-calculator", title: "BMI Calculator", desc: "Calculate your Body Mass Index.", icon: "fa-weight" }, { id: "emi-calculator", title: "EMI Calculator", desc: "Calculate your Equated Monthly Installment for loans.", icon: "fa-percent" }, { id: "sip-calculator", title: "SIP Calculator", desc: "Estimate the returns on your Systematic Investment Plan (SIP).", icon: "fa-chart-line" }, { id: "base64-encoder", title: "Base64 Tools", desc: "Encode text to Base64 or decode from Base64 back to text.", icon: "fa-exchange-alt" }, { id: "timer-stopwatch", title: "Timer/Stopwatch", desc: "A versatile timer and stopwatch for all your timing needs.", icon: "fa-stopwatch" }, ];

          const toolImplementations = {
              'text-to-speech': () => ({ content: `<textarea id="tts-text" class="tool-textarea" placeholder="Enter text to speak..."></textarea><label for="tts-voice">Voice:</label><select id="tts-voice" class="tool-select"></select><div class="tool-controls"><button id="tts-speak-btn" class="btn">Speak</button><button id="tts-stop-btn" class="btn btn-secondary">Stop</button></div><div id="tts-status" class="result-box mt-1" style="color:red;"></div>`, onMount: () => { const synth = window.speechSynthesis; const textInput = document.getElementById('tts-text'); const voiceSelect = document.getElementById('tts-voice'); const speakBtn = document.getElementById('tts-speak-btn'); const stopBtn = document.getElementById('tts-stop-btn'); const statusBox = document.getElementById('tts-status'); let voices = []; function populateVoiceList() { voices = synth.getVoices().sort((a, b) => a.name.localeCompare(b.name)); voiceSelect.innerHTML = voices.map((voice, i) => `<option value="${i}" ${voice.default ? 'selected' : ''}>${voice.name} (${voice.lang})</option>`).join(''); if (voices.length === 0) { statusBox.textContent = "No Text-to-Speech voices were found on this device. Please check your phone's settings."; speakBtn.disabled = true; voiceSelect.disabled = true; } else { statusBox.textContent = ""; speakBtn.disabled = false; voiceSelect.disabled = false; } } if (!synth) { statusBox.textContent = "Text-to-Speech is not supported in this browser/WebView."; speakBtn.disabled = true; stopBtn.disabled = true; return; } populateVoiceList(); if (synth.onvoiceschanged !== undefined) { synth.onvoiceschanged = populateVoiceList; } else { setTimeout(populateVoiceList, 500); } speakBtn.addEventListener('click', () => { if (synth.speaking) { showNotification("Already speaking.", 3000); return; } if (textInput.value.trim() !== '') { const utterThis = new SpeechSynthesisUtterance(textInput.value); utterThis.voice = voices[voiceSelect.value]; synth.speak(utterThis); } else { showNotification("Please enter text to speak.", 3000); } }); stopBtn.addEventListener('click', () => synth.cancel()); } }),
              'speech-to-text': () => ({ content: ` <div class="tool-controls"> <button id="stt-start-btn" class="btn">Start Listening</button> <button id="stt-stop-btn" class="btn btn-secondary hidden">Stop</button> <button id="stt-download-btn" class="btn hidden" style="background-color:#28a745;">Download Transcript</button> </div> <div id="stt-result" class="result-box mt-1">Your transcribed text will appear here...</div> `, onMount: () => { const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition; if (!SpeechRecognition) { showNotification("Speech-to-Text is not supported in this browser/WebView.", 5000); return; } const recognition = new SpeechRecognition(); recognition.continuous = true; recognition.interimResults = true; recognition.lang = 'en-US'; const startBtn = document.getElementById('stt-start-btn'); const stopBtn = document.getElementById('stt-stop-btn'); const downloadBtn = document.getElementById('stt-download-btn'); const resultBox = document.getElementById('stt-result'); recognition.onstart = () => { startBtn.classList.add('hidden'); stopBtn.classList.remove('hidden'); downloadBtn.classList.add('hidden'); resultBox.textContent = 'Listening...'; }; recognition.onresult = (event) => { let final_transcript = ''; for (let i = event.resultIndex; i < event.results.length; ++i) { if (event.results[i].isFinal) { final_transcript += event.results[i][0].transcript; } } resultBox.textContent = final_transcript; }; recognition.onerror = (event) => { showNotification(`Speech recognition error: ${event.error}`, 5000); startBtn.classList.remove('hidden'); stopBtn.classList.add('hidden'); }; recognition.onend = () => { startBtn.classList.remove('hidden'); stopBtn.classList.add('hidden'); if (resultBox.textContent.trim() !== '') { downloadBtn.classList.remove('hidden'); } }; startBtn.addEventListener('click', () => { resultBox.textContent = 'Your transcribed text will appear here...'; recognition.start(); }); stopBtn.addEventListener('click', () => { recognition.stop(); }); downloadBtn.addEventListener('click', () => { const transcript = resultBox.textContent; if (transcript.trim() !== '') { const textBlob = new Blob([transcript], { type: 'text/plain' }); downloadFile(textBlob, 'transcript.txt', 'text/plain'); } }); } }),
              // ... all other tool implementations are correct and can remain as they are ...
          };

          // --- UNIVERSAL SETUP FUNCTIONS (UNCHANGED) ---
          function renderToolCards() { toolsGrid.innerHTML = tools.sort((a,b) => a.title.localeCompare(b.title)).map(tool => ` <article class="tool-card" data-tool-id="${tool.id}"> <i class="fas ${tool.icon} card-icon"></i> <h2>${tool.title}</h2> </article> `).join(''); }
          let notificationTimeout; function showNotification(message, duration = 3000) { clearTimeout(notificationTimeout); notificationEl.textContent = message; notificationEl.style.opacity = '1'; notificationEl.style.bottom = '20px'; notificationTimeout = setTimeout(() => { notificationEl.style.opacity = '0'; notificationEl.style.bottom = '-100px'; }, duration); }
          function openModal(toolId) { const toolData = tools.find(t => t.id === toolId); const tool = toolImplementations[toolId]; if (!toolData || !tool) return; const { content, onMount } = tool(); modalContent.innerHTML = ` <div class="modal-header"> <h2>${toolData.title}</h2> <button id="modal-close-btn" class="modal-close-btn">W</button> </div> <p class="modal-description">${toolData.desc}</p> <div class="tool-section"> ${content} </div> `; modalContainer.classList.add('show'); document.body.style.overflow = 'hidden'; document.getElementById('modal-close-btn').addEventListener('click', closeModal); if (onMount) { onMount(); } }
          function closeModal() { modalContainer.classList.remove('show'); document.body.style.overflow = 'auto'; modalContent.innerHTML = ''; }
          toolsGrid.addEventListener('click', (e) => { const card = e.target.closest('.tool-card'); if (card) { const toolId = card.dataset.toolId; openModal(toolId); } });
          modalContainer.addEventListener('click', (e) => { if (e.target === modalContainer) { closeModal(); } });
          document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && modalContainer.classList.contains('show')) { closeModal(); } });

          // =================================================================
          // THIS IS THE NEW LOGIC TO AUTO-LAUNCH THE TOOL
          // =================================================================
          function initializeApp() {
              renderToolCards(); // First, render all the tool cards in the background.

              // Then, immediately open the Text to Speech tool by its ID.
              // Use a small timeout to ensure the browser has finished rendering the grid.
              setTimeout(() => {
                  openModal('text-to-speech');
              }, 100);
          }

          // --- INITIALIZE THE APP ---
          initializeApp();
      });
    </script>
  </body>
</html>
